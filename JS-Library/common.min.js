const MaxSizeInBytes_CosmosDocument=2086912;function getSizeInBytesOfString(e){for(var t=e.length,n=e.length-1;0<=n;n--){var s=e.charCodeAt(n);127<s&&s<=2047?t++:2047<s&&s<=65535&&(t+=2),56320<=s&&s<=57343&&n--}return t}function getSizeInBytesOfJSON(e){return getSizeInBytesOfString(JSON.stringify(e))}function getStringSizePercent(e,t=MaxSizeInBytes_CosmosDocument,n=3){return(100*getSizeInBytesOfString(e)/t).toFixed(n)}function getJsonSizePercent(e,t=MaxSizeInBytes_CosmosDocument,n=3){return(100*getSizeInBytesOfJSON(e)/t).toFixed(n)}function showCharm(e){Metro.charms.open("#"+e)}function hideCharm(e){Metro.charms.close("#"+e)}function showOrHideCharm(e){Metro.charms.toggle("#"+e)}function disableElement(e){$("#"+e).attr("disabled",!0)}function enableElement(e){$("#"+e).attr("disabled",!1)}function launchFullScreen(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()}function setupFullScreen(e,t){e.addEventListener&&(e.addEventListener("webkitfullscreenchange",()=>{t&&t()},!1),e.addEventListener("mozfullscreenchange",()=>{t&&t()},!1),e.addEventListener("fullscreenchange",()=>{t&&t()},!1),e.addEventListener("MSFullscreenChange",()=>{t&&t()},!1))}function showError(e){(0,Metro.toast.create)(e,null,5e3,"bg-red fg-white")}function showMessage(e){(0,Metro.toast.create)(e,null,5e3,"bg-green fg-white")}function redirectUsingPost(e,t){$.ajax({url:e,dataType:"json",type:"POST",contentType:"application/json; charset=utf-8",data:t,async:!0,processData:!1,cache:!1})}function postAndRedirect(e,t,s,r){s&&$("#"+s).attr("disabled",!0),r&&$("#"+r).html(),$.ajax({url:e,dataType:"json",type:"POST",contentType:"application/json; charset=utf-8",data:t,async:!0,processData:!1,cache:!1,success:function(e,t,n){!1===(e=JSON.parse(n.responseText)).success?($("#"+r).html("<p>"+e.error+"</p>"),s&&$("#"+s).attr("disabled",!1)):location.href=e.url},error:function(e,t,n){t="?Status?"+t+"?error?"+n+"?others?"+e.responseText;$("#"+r).html("<p>"+t+"</p>"),s&&$("#"+s).attr("disabled",!1)}})}function saveAndRedirect(e,t,s){s&&$("#"+s).attr("disabled",!0),$.ajax({url:e,dataType:"json",type:"POST",contentType:"application/json; charset=utf-8",data:t,async:!0,processData:!1,cache:!1,success:function(e,t,n){!1===(e=JSON.parse(n.responseText)).success?(showError(e.error),s&&$("#"+s).attr("disabled",!1)):location.href=e.url},error:function(e,t,n){showError("?Status?"+t+"?error?"+n+"?others?"+e.responseText),s&&$("#"+s).attr("disabled",!1)}})}function saveAndShowMessage(e,t,s){$.ajax({url:e,dataType:"json",type:"POST",contentType:"application/json; charset=utf-8",data:t,async:!0,processData:!1,cache:!1,success:function(e,t,n){!1===(e=JSON.parse(n.responseText)).success?(showError(e.error),s&&$("#"+s).attr("disabled",!1)):(showMessage(e.message),$("#"+s).attr("disabled",!1))},error:function(e,t,n){showError("?Status?"+t+"?error?"+n+"?others?"+e.responseText),$("#"+s).attr("disabled",!1)}})}function refreshLanguage(e){$.post("/common/set-language",{language:e},function(e,t,n){window.location.href=window.location.href},"text")}function generateRobotAvatar(e,t,n=".png"){var s=new jsSHA("SHA-1","TEXT");return s.update(t+"@"+e),"https://robohash.org/"+s.getHash("HEX")+n}