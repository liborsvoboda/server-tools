/**
 * Minified by jsDelivr using Terser v5.3.0.
 * Original file: /npm/childprocess@2.0.2/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";const fs=require("fs"),path=require("path"),os=require("os"),assert=require("assert"),cp=require("child_process"),utility=require("utility"),originFork=cp.fork,childprocess=__filename;let callback=null,callbackPath="",tmpdir=process.env.TMPDIR||os.tmpdir();cp.fork=function(e,t,i){if(!callback||!callbackPath)return originFork.call(cp,e,t,i);try{e=require.resolve(e)}catch(r){return originFork.call(cp,e,t,i)}const r=path.join(tmpdir,e.replace(/[\:\/\\]+/g,"_")+"."+utility.md5(e+utility.randomString())+"."+Date.now()+".js"),n=`\n    'use strict';\n    const f = require.extensions['.js'];\n    const modulePath = ${JSON.stringify(e)};\n    require.extensions['.js'] = function(module, filename) {\n      if (filename === modulePath) {\n        process.mainModule = module;\n        require.extensions['.js'] = f;\n      }\n      f(module, filename);\n    }\n    const childprocess = require(${JSON.stringify(childprocess)});\n    childprocess.inject(${JSON.stringify(callbackPath)});\n    require(modulePath);\n  `;fs.writeFileSync(r,n),(t=callback(r,t,i))&&3===t.length||(t=[e,t,i]);const c=originFork.apply(cp,t);return c.on("exit",(function(){fs.unlinkSync(r)})),c},exports.inject=function(e){if("string"==typeof e)return callbackPath=e,assert.ok(callbackPath,"filepath should not be empty"),assert.ok(fs.existsSync(callbackPath),callbackPath+" should exist"),void(callback=require(callbackPath));if("function"==typeof e){var t=e.toString();return callbackPath=path.join(tmpdir,"callback_."+utility.md5(t+utility.randomString())+"."+Date.now()+".js"),callback=e,void fs.writeFileSync(callbackPath,`module.exports = ${t};`)}throw new Error("argument in .inject() should be function or filepath")},exports.reset=function(){callbackPath=""};
//# sourceMappingURL=/sm/62d8fabae7d7636d6cc35e7cb1dfca4dea3c301b94f2122a578fef00d81b8802.map